<h2>New</h2>
<%= form_for(@code, url: codes_path) do |f| %>
              <% if @code.errors.any? %>
                <div id="error_explanation">
                  <h2><%= @code.errors.count %>件のエラーが発生しました。</h2>
                  <ul>
                    <% @code.errors.full_messages.each do |message| %>
                      <li><%= message %></li>
                    <% end %>
                  </ul>
                </div>
              <% end %>
	<div class="code-form">
		<div class="form-field form-image">
			<%= f.label :post_image do %>
			<img src="assets/img-icon.jpg" width="225" class="img-icon">
		</div>
		<div>
			<%= f.attachment_field :post_image %>
		</div>
			<% end %>
		<div class="form-field form-select">
			<%= f.select :category, [["Casual"], ["Conservative"], ["Street"], ["Mode"], ["Ethnic"], ["Rock"], ["Other"]], prompt: "Category" %>
		</div>
		<div class="form-field">
			<%= f.label :text, 'Comment' %>
			<%= f.text_area :text, class:"form-control" %>
		</div>
		<div class="form-field">
			<%= f.submit 'Post', class:"btn btn-info" %>
		</div>
	</div>
<% end %>

<script>
$(function(){
    // inputのidから情報の取得
    $('#code_post_image').on('change', function (e) {
	// ここから既存の画像のurlの取得
    var reader = new FileReader();
    reader.onload = function (e) {
        $(".img-icon").attr('src', e.target.result);
    }
	// ここまで
    reader.readAsDataURL(e.target.files[0]); //取得したurlにアップロード画像のurlを挿入
});
});

</script>